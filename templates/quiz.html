<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Study</title>
        <link href="/static/styling.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    </head>
    <body>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <nav class="navbar navbar-expand-lg navbar dark bg-dark">
            <div class="civ-arts">
                <div class="collapse navbar-collapse">
                    <div class="navbar-nav">
                        <a class="nav-link active text-white" aria-current="page" href="{{url_for('home')}}">Home</a>
                        <a class="nav-link text-white" href="{{url_for('get_study')}}">Study</a>
                        <a class="nav-link text-white" href="{{url_for('get_quiz')}}">Quiz</a>
                        <a class="nav-link text-white" href="{{url_for('grades')}}">Grades</a>
                    </div>
                </div>
            </div>
            <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="{{url_for('get_login')}}">Login or Register</a>           
                    </li>
                </ul>
            </div>        
        </nav>
        {% if method=="GET" %}
        <div class = "form-check one">
            <form method = "POST">
                {{ form.hidden_tag() }}
                <section>
                    <h3>Ancients</h3>
                        <div>{{ form.archaic(class="form-check-input") }} 
                            <label for="form.archaic.label.field_id"> {{ form.archaic.label.text }} </label> </div>
                        <div>{{ form.classical(class="form-check-input") }} 
                            <label for="form.classical.label.field_id"> {{ form.classical.label.text }} </label> </div>
                        <div>{{ form.hellenistic(class="form-check-input") }} 
                            <label for="form.hellenistic.label.field_id"> {{ form.hellenistic.label.text }} </label> </div>
                </section>
                <section>
                    <h3>Medieval</h3>
                    <div>{{ form.romanesque(class="form-check-input") }}
                        <label for= "form.romanesque.label.field_id"> {{ form.romanesque.label.text }}</label>
                    </div>
                    <div>{{ form.gothic(class="form-check-input") }}
                        <label for= "form.gothic.label.field_id"> {{ form.gothic.label.text }} </label>
                    </div>
                </section>
                <section>
                    <h3>Renaissance</h3>
                        <div>{{ form.renaissance(class="form-check-input") }}
                            <label for= "form.renaissance.label.field_id"> {{ form.renaissance.label.text }} </label>
                        </div>           
                        <div>{{ form.northern(class="form-check-input") }}
                            <label for= "form.northern.label.field_id"> {{ form.northern.label.text }} </label>
                        </div>                           
                </section>
                <section>
                    <h3>Baroque</h3>
                    <div>{{ form.aristocratic(class="form-check-input") }}
                        <label for= "form.aristocratic.label.field_id"> {{ form.aristocratic.label.text }} </label>
                    </div>       
                    <div>{{ form.dutch(class="form-check-input") }}
                        <label for= "form.dutch.label.field_id"> {{ form.dutch.label.text }} </label>
                    </div>
                </section>
                <section>
                    <h3>Contemporary</h3>
                    <div>{{ form.neoclassical(class="form-check-input") }}
                        <label for= "form.neoclassical.label.field_id"> {{ form.neoclassical.label.text }} </label>
                    </div>
                    <div>{{ form.romantic(class="form-check-input") }}
                        <label for= "form.romantic.label.field_id"> {{ form.romantic.label.text }} </label>
                    </div>                
                </section>
                <section>
                    <h3>Modernism</h3>
                        <div>{{ form.impressionism(class="form-check-input") }}
                            <label for= "form.impressionism.label.field_id"> {{ form.impressionism.label.text }} </label>
                        </div>
                        <div>{{ form.post_impressionism(class="form-check-input") }}
                            <label for= "form.post_impressionism.label.field_id"> {{ form.post_impressionism.label.text }} </label>
                        </div>    
                        <div>{{ form.cubism(class="form-check-input") }}
                            <label for= "form.cubism.label.field_id"> {{ form.cubism.label.text }} </label>
                        </div>
                        <div>{{ form.post_modernism(class="form-check-input") }}
                            <label for= "form.post_modernism.label.field_id"> {{ form.post_modernism.label.text }} </label>
                        </div>    
                        <div>{{ form.surrealism(class="form-check-input") }}
                            <label for= "form.surrealism.label.field_id"> {{ form.surrealism.label.text }} </label>
                        </div>
                        <div>{{ form.abstract(class="form-check-input") }}
                            <label for= "form.abstract.label.field_id"> {{ form.abstract.label.text }} </label>
                        </div>    
                </section>
                <section>
                    <h3>Music</h3>
                    <div>{{ form.baroqueMusic(class="form-check-input") }}
                        <label for= "form.baroqueMusic.label.field_id"> {{ form.baroqueMusic.label.text }} </label>
                    </div>
                    <div>{{ form.classicalMusic(class="form-check-input") }}
                        <label for= "form.classicalMusic.label.field_id"> {{ form.classicalMusic.label.text }} </label>
                    </div>
                    <div>{{ form.romanticMusic(class="form-check-input") }}
                        <label for= "form.romanticMusic.label.field_id"> {{ form.romanticMusic.label.text }} </label>
                    </div>           
                    <div>{{ form.contemporaryMusic(class="form-check-input") }}
                        <label for= "form.contemporaryMusic.label.field_id"> {{ form.contemporaryMusic.label.text }} </label>
                    </div>     
                </section>
        <div class="studysubmit">
            <div class="col-12">
                <section>
                    {{form.submit(class="btn btn-primary")}}
                </section>
            </div>
        </div>
    </form>
</div>

        {%else%}
            {% set types = ['type', 'title', 'subtype', 'year']%}
            {% set dic = {'type': ['Ancient', 'Medieval', 'Renaissance', 'Baroque', 'Contemporary', 'Modernism'],
                'subtype':['Classical', 'Archaic', 'Hellenistic', 'Romanesque', 'Gothic', 'Renaissance', 'Gothic', 
                'Nothern Renaissance', 'Aristocratic Baroque', 'Dutch Baroque', 'Neoclassical', 'Romantic', 
                'Impressionism', 'Post-Impressionism', 'Cubism', 'Post-modernism', 'Surrealism', 'Abstract', 
                'Baroque Music', 'Classical Music', 'Romantic Music', 'Contemporary Music'] }%}
            {% set pair={} %}
            {{piece}}
            <div id="general">
            {% for piece in pieces%}
            <div name="{{piece.title}}">
                <br>
                {% set outer = loop.index%}
                {{outer}}
                {% set w_answers = []%}
                {% set index = range(0,len(types)-1) | random() %}
                {% set question = types[index]%}
                {{question}}
                <br>
                <br>
                <img src="{{ url_for('static', filename = '../static/Artworks Database/Artpieces/'+piece.title+'.jpg') }}" alt="{{ piece.title }}" height="200px"/>
                <br>
                <br>
                {%if question=='type'%}
                    {% set r_answer = piece.type%}
                    {% set w_answer = dic['type']%}
                    {% for i in range(len(dic['type']))%}
                        {%do w_answers.append(w_answer[i])%}
                    {%endfor%}
                    {%do w_answers.append(r_answer)%}
                    {% for answer in w_answers | shuffle %}
                        <input  type="radio" name="{{outer}}" value="{{answer}}"> {{answer}}
                        <br>
                    {%endfor%}
                    {% set x=pair.__setitem__(str(outer), r_answer) %}
                {%elif question=='title'%}
                    {% set r_answer = piece.title%}
                    {% for i in range(5)%}
                        {% set i = range(0,len(pieces)-1) | random() %}
                        {% set w_answer = pieces[i].title%}
                        {%do w_answers.append(w_answer)%}
                    {%endfor%}
                    {%do w_answers.append(r_answer)%}
                    {% for answer in w_answers | shuffle %}
                        <input  type="radio" name="{{outer}}" value="{{answer}}"> {{answer}}
                        <br>
                    {%endfor%}
                    {% set x=pair.__setitem__(str(outer), r_answer) %}
                {%elif question=='subtype'%}
                    {% set r_answer = piece.subtype%}
                    {% set w_answer = dic['subtype']%}
                    {% for i in range(len(dic['subtype']))%}
                        {%do w_answers.append(w_answer[i])%}
                    {%endfor%}
                    {%do w_answers.append(r_answer)%}
                    {% for answer in w_answers | shuffle %}
                        <input  type="radio" name="{{outer}}" value="{{answer}}"> {{answer}}
                        <br>
                    {%endfor%}
                    {% set x=pair.__setitem__(str(outer), r_answer) %}
                {%elif question=='year'%}
                    {% set r_answer = piece.year[0]%}
                    {% for i in range(5)%}
                        {% set i = range(0,len(pieces)-1) | random() %}
                        {% set w_answer = pieces[i].year[0]%}
                        {%do w_answers.append(w_answer)%}
                    {%endfor%}
                    {% for answer in w_answers | shuffle %}
                        <input  type="radio" name="{{outer}}" value="{{answer}}"> {{answer}}
                        <br>
                    {%endfor%}
                    {% set x=pair.__setitem__(str(outer), r_answer) %}
                {%endif%}
                Answer is: {{r_answer}}
                <br> 
            </div>
            {% endfor %}
        </div>
        {%endif%}
       
        {% set json_dic = json_dump(pair)%}
        {{json_dic}}
        <button type="button" onclick='Grade()'>Grade
        </button>
        <div id="result">
        </div>
        <script>window.addEventListener("DOMContentLoaded", async () => {
            Grade
        });
            function Grade(){
                const div = document.getElementById("result");
                dic = '{{json_dic}}';
                dic = dic.replace(/&#34;/g,'"');
                obj = Object(dic);
                
                let score = 0;
                // grab the big outside div

                let gen_div = document.getElementById("general");
                let count1 =  gen_div.childElementCount;
                for(let i = 0; i < count1; i++){
                    let list = document.getElementsByName(i);
                    console.log(list);
                }
                
            }
        </script>
    </body>
</html>